<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Slide relative to an index chunked by period — slide_period • slider</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Slide relative to an index chunked by period — slide_period"><meta name="description" content="slide_period() breaks up the .i-ndex by .period, and then uses that
to define the indices to slide over .x with.
It can be useful for, say, sliding over daily data in monthly chunks.
The underlying engine for breaking up .i is warp::warp_distance().
If you need more information about the .period types, that is the best
place to look."><meta property="og:description" content="slide_period() breaks up the .i-ndex by .period, and then uses that
to define the indices to slide over .x with.
It can be useful for, say, sliding over daily data in monthly chunks.
The underlying engine for breaking up .i is warp::warp_distance().
If you need more information about the .period types, that is the best
place to look."><meta name="robots" content="noindex"><script defer data-domain="slider.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">slider</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/slider.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/rowwise.html">Row-wise iteration with slider</a></li>
    <li><a class="dropdown-item" href="../articles/tsibble.html">Converting from tsibble</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/slider/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Slide relative to an index chunked by period</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/slider/blob/main/R/slide-period.R" class="external-link"><code>R/slide-period.R</code></a></small>
      <div class="d-none name"><code>slide_period.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>slide_period()</code> breaks up the <code>.i</code>-ndex by <code>.period</code>, and then uses that
to define the indices to slide over <code>.x</code> with.</p>
<p>It can be useful for, say, sliding over daily data in monthly chunks.</p>
<p>The underlying engine for breaking up <code>.i</code> is <code><a href="https://davisvaughan.github.io/warp/reference/warp_distance.html" class="external-link">warp::warp_distance()</a></code>.
If you need more information about the <code>.period</code> types, that is the best
place to look.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">slide_period</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">.i</span>,</span>
<span>  <span class="va">.period</span>,</span>
<span>  <span class="va">.f</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .every <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  .origin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .before <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .after <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .complete <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slide_period_vec</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">.i</span>,</span>
<span>  <span class="va">.period</span>,</span>
<span>  <span class="va">.f</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .every <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  .origin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .before <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .after <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .complete <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .ptype <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slide_period_dbl</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">.i</span>,</span>
<span>  <span class="va">.period</span>,</span>
<span>  <span class="va">.f</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .every <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  .origin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .before <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .after <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .complete <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slide_period_int</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">.i</span>,</span>
<span>  <span class="va">.period</span>,</span>
<span>  <span class="va">.f</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .every <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  .origin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .before <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .after <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .complete <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slide_period_lgl</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">.i</span>,</span>
<span>  <span class="va">.period</span>,</span>
<span>  <span class="va">.f</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .every <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  .origin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .before <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .after <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .complete <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slide_period_chr</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">.i</span>,</span>
<span>  <span class="va">.period</span>,</span>
<span>  <span class="va">.f</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .every <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  .origin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .before <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .after <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .complete <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slide_period_dfr</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">.i</span>,</span>
<span>  <span class="va">.period</span>,</span>
<span>  <span class="va">.f</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .every <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  .origin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .before <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .after <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .complete <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .names_to <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/zap.html" class="external-link">zap</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .name_repair <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"unique"</span>, <span class="st">"universal"</span>, <span class="st">"check_unique"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slide_period_dfc</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">.i</span>,</span>
<span>  <span class="va">.period</span>,</span>
<span>  <span class="va">.f</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .every <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  .origin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .before <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .after <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .complete <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .name_repair <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"unique"</span>, <span class="st">"universal"</span>, <span class="st">"check_unique"</span>, <span class="st">"minimal"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--x">.x<a class="anchor" aria-label="anchor" href="#arg--x"></a></dt>
<dd><p><code>[vector]</code></p>
<p>The vector to iterate over and apply <code>.f</code> to.</p></dd>


<dt id="arg--i">.i<a class="anchor" aria-label="anchor" href="#arg--i"></a></dt>
<dd><p><code>[Date / POSIXct / POSIXlt]</code></p>
<p>A datetime index to break into periods.</p>
<p>There are 3 restrictions on the index:</p><ul><li><p>The size of the index must match the size of <code>.x</code>, they will not be
recycled to their common size.</p></li>
<li><p>The index must be an <em>increasing</em> vector, but duplicate values
are allowed.</p></li>
<li><p>The index cannot have missing values.</p></li>
</ul></dd>


<dt id="arg--period">.period<a class="anchor" aria-label="anchor" href="#arg--period"></a></dt>
<dd><p><code>[character(1)]</code></p>
<p>A string defining the period to group by. Valid inputs can be roughly
broken into:</p><ul><li><p><code>"year"</code>, <code>"quarter"</code>, <code>"month"</code>, <code>"week"</code>, <code>"day"</code></p></li>
<li><p><code>"hour"</code>, <code>"minute"</code>, <code>"second"</code>, <code>"millisecond"</code></p></li>
<li><p><code>"yweek"</code>, <code>"mweek"</code></p></li>
<li><p><code>"yday"</code>, <code>"mday"</code></p></li>
</ul></dd>


<dt id="arg--f">.f<a class="anchor" aria-label="anchor" href="#arg--f"></a></dt>
<dd><p><code>[function / formula]</code></p>
<p>If a <strong>function</strong>, it is used as is.</p>
<p>If a <strong>formula</strong>, e.g. <code>~ .x + 2</code>, it is converted to a function. There
are three ways to refer to the arguments:</p><ul><li><p>For a single argument function, use <code>.</code></p></li>
<li><p>For a two argument function, use <code>.x</code> and <code>.y</code></p></li>
<li><p>For more arguments, use <code>..1</code>, <code>..2</code>, <code>..3</code> etc</p></li>
</ul><p>This syntax allows you to create very compact anonymous functions.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed on to the mapped function.</p></dd>


<dt id="arg--every">.every<a class="anchor" aria-label="anchor" href="#arg--every"></a></dt>
<dd><p><code>[positive integer(1)]</code></p>
<p>The number of periods to group together.</p>
<p>For example, if the period was set to <code>"year"</code> with an every value of <code>2</code>,
then the years 1970 and 1971 would be placed in the same group.</p></dd>


<dt id="arg--origin">.origin<a class="anchor" aria-label="anchor" href="#arg--origin"></a></dt>
<dd><p><code>[Date(1) / POSIXct(1) / POSIXlt(1) / NULL]</code></p>
<p>The reference date time value. The default when left as <code>NULL</code> is the
epoch time of <code>1970-01-01 00:00:00</code>, <em>in the time zone of the index</em>.</p>
<p>This is generally used to define the anchor time to count from, which is
relevant when the every value is <code>&gt; 1</code>.</p></dd>


<dt id="arg--before-after">.before, .after<a class="anchor" aria-label="anchor" href="#arg--before-after"></a></dt>
<dd><p><code>[integer(1) / Inf]</code></p>
<p>The number of values before or after the current element to
include in the sliding window. Set to <code>Inf</code> to select all elements
before or after the current element. Negative values are allowed, which
allows you to "look forward" from the current element if used as the
<code>.before</code> value, or "look backwards" if used as <code>.after</code>.</p></dd>


<dt id="arg--complete">.complete<a class="anchor" aria-label="anchor" href="#arg--complete"></a></dt>
<dd><p><code>[logical(1)]</code></p>
<p>Should the function be evaluated on complete windows only? If <code>FALSE</code>,
the default, then partial computations will be allowed.</p></dd>


<dt id="arg--ptype">.ptype<a class="anchor" aria-label="anchor" href="#arg--ptype"></a></dt>
<dd><p><code>[vector(0) / NULL]</code></p>
<p>A prototype corresponding to the type of the output.</p>
<p>If <code>NULL</code>, the default, the output type is determined by computing the
common type across the results of the calls to <code>.f</code>.</p>
<p>If supplied, the result of each call to <code>.f</code> will be cast to that type,
and the final output will have that type.</p>
<p>If <code>getOption("vctrs.no_guessing")</code> is <code>TRUE</code>, the <code>.ptype</code> must be
supplied. This is a way to make production code demand fixed types.</p></dd>


<dt id="arg--names-to">.names_to<a class="anchor" aria-label="anchor" href="#arg--names-to"></a></dt>
<dd><p>This controls what to do with input names supplied in <code>...</code>.</p><ul><li><p>By default, input names are <a href="https://rlang.r-lib.org/reference/zap.html" class="external-link">zapped</a>.</p></li>
<li><p>If a string, specifies a column where the input names will be
copied. These names are often useful to identify rows with
their original input. If a column name is supplied and <code>...</code> is
not named, an integer column is used instead.</p></li>
<li><p>If <code>NULL</code>, the input names are used as row names.</p></li>
</ul></dd>


<dt id="arg--name-repair">.name_repair<a class="anchor" aria-label="anchor" href="#arg--name-repair"></a></dt>
<dd><p>One of <code>"unique"</code>, <code>"universal"</code>, <code>"check_unique"</code>,
<code>"unique_quiet"</code>, or  <code>"universal_quiet"</code>. See <code><a href="https://vctrs.r-lib.org/reference/vec_as_names.html" class="external-link">vec_as_names()</a></code> for the
meaning of these options.</p>
<p>With <code><a href="https://vctrs.r-lib.org/reference/vec_bind.html" class="external-link">vec_rbind()</a></code>, the repair function is applied to all inputs
separately. This is because <code><a href="https://vctrs.r-lib.org/reference/vec_bind.html" class="external-link">vec_rbind()</a></code> needs to align their
columns before binding the rows, and thus needs all inputs to
have unique names. On the other hand, <code><a href="https://vctrs.r-lib.org/reference/vec_bind.html" class="external-link">vec_cbind()</a></code> applies the
repair function after all inputs have been concatenated together
in a final data frame. Hence <code><a href="https://vctrs.r-lib.org/reference/vec_bind.html" class="external-link">vec_cbind()</a></code> allows the more
permissive minimal names repair.</p></dd>


<dt id="arg--size">.size<a class="anchor" aria-label="anchor" href="#arg--size"></a></dt>
<dd><p>If, <code>NULL</code>, the default, will determine the number of rows in
<code><a href="https://vctrs.r-lib.org/reference/vec_bind.html" class="external-link">vec_cbind()</a></code> output by using the tidyverse <a href="https://vctrs.r-lib.org/reference/theory-faq-recycling.html" class="external-link">recycling rules</a>.</p>
<p>Alternatively, specify the desired number of rows, and any inputs of length
1 will be recycled appropriately.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A vector fulfilling the following invariants:</p>
<div class="section">
<h3 id="slide-period-"><code>slide_period()</code><a class="anchor" aria-label="anchor" href="#slide-period-"></a></h3>

<ul><li><p><code>vec_size(slide_period(.x)) == vec_size(unique(warp::warp_distance(.i)))</code></p></li>
<li><p><code>vec_ptype(slide_period(.x)) == list()</code></p></li>
</ul></div>

<div class="section">
<h3 id="slide-period-vec-and-slide-period-variants"><code>slide_period_vec()</code> and <code>slide_period_*()</code> variants<a class="anchor" aria-label="anchor" href="#slide-period-vec-and-slide-period-variants"></a></h3>

<ul><li><p><code>vec_size(slide_period_vec(.x)) == vec_size(unique(warp::warp_distance(.i)))</code></p></li>
<li><p><code>vec_size(slide_period_vec(.x)[[1]]) == 1L</code></p></li>
<li><p><code>vec_ptype(slide_period_vec(.x, .ptype = ptype)) == ptype</code></p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="block.html">block()</a></code>, <code><a href="slide.html">slide()</a></code>, <code><a href="slide_index.html">slide_index()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2019-01-28"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0</span><span class="op">:</span><span class="fl">5</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Split `i` into 2-day periods to apply `.f` to</span></span></span>
<span class="r-in"><span><span class="fu">slide_period</span><span class="op">(</span><span class="va">i</span>, <span class="va">i</span>, <span class="st">"day"</span>, <span class="va">identity</span>, .every <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-28" "2019-01-29"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-30" "2019-01-31"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-02-01" "2019-02-02"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or into 1-month periods</span></span></span>
<span class="r-in"><span><span class="fu">slide_period</span><span class="op">(</span><span class="va">i</span>, <span class="va">i</span>, <span class="st">"month"</span>, <span class="va">identity</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-28" "2019-01-29" "2019-01-30" "2019-01-31"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-02-01" "2019-02-02"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now select:</span></span></span>
<span class="r-in"><span><span class="co"># - The current 2-day period</span></span></span>
<span class="r-in"><span><span class="co"># - Plus 1 2-day period before the current one</span></span></span>
<span class="r-in"><span><span class="fu">slide_period</span><span class="op">(</span><span class="va">i</span>, <span class="va">i</span>, <span class="st">"day"</span>, <span class="va">identity</span>, .every <span class="op">=</span> <span class="fl">2</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-28" "2019-01-29"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-28" "2019-01-29" "2019-01-30" "2019-01-31"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-30" "2019-01-31" "2019-02-01" "2019-02-02"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Alter the `origin` to control the reference date for</span></span></span>
<span class="r-in"><span><span class="co"># how the 2-day groups are formed</span></span></span>
<span class="r-in"><span><span class="va">origin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2019-01-29"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">slide_period</span><span class="op">(</span><span class="va">i</span>, <span class="va">i</span>, <span class="st">"day"</span>, <span class="va">identity</span>, .every <span class="op">=</span> <span class="fl">2</span>, .origin <span class="op">=</span> <span class="va">origin</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-28"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-29" "2019-01-30"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-31" "2019-02-01"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-02-02"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This can be useful for, say, monthly averages</span></span></span>
<span class="r-in"><span><span class="va">daily_sales</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">9</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">slide_period_dbl</span><span class="op">(</span><span class="va">daily_sales</span>, <span class="va">i</span>, <span class="st">"month"</span>, <span class="va">mean</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4.0 6.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If you need the index, slide over and return a data frame</span></span></span>
<span class="r-in"><span><span class="va">sales_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>i <span class="op">=</span> <span class="va">i</span>, sales <span class="op">=</span> <span class="va">daily_sales</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">slide_period_dfr</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">sales_df</span>,</span></span>
<span class="r-in"><span>  <span class="va">sales_df</span><span class="op">$</span><span class="va">i</span>,</span></span>
<span class="r-in"><span>  <span class="st">"month"</span>,</span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">.x</span><span class="op">$</span><span class="va">i</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     sales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.x</span><span class="op">$</span><span class="va">sales</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            i sales</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2019-01-31   4.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2019-02-02   6.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># One of the most unique features about `slide_period()` is that it is</span></span></span>
<span class="r-in"><span><span class="co"># aware of how far apart elements of `.i` are in the `.period` you are</span></span></span>
<span class="r-in"><span><span class="co"># interested in. For example, if you do a monthly slide with `i2`, selecting</span></span></span>
<span class="r-in"><span><span class="co"># the current month and 1 month before it, then it will recognize that</span></span></span>
<span class="r-in"><span><span class="co"># `2019-02-01` and `2019-04-01` are not beside each other, and it won't</span></span></span>
<span class="r-in"><span><span class="co"># group them together.</span></span></span>
<span class="r-in"><span><span class="va">i2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2019-01-01"</span>, <span class="st">"2019-02-01"</span>, <span class="st">"2019-04-01"</span>, <span class="st">"2019-05-01"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">slide_period</span><span class="op">(</span><span class="va">i2</span>, <span class="va">i2</span>, <span class="st">"month"</span>, <span class="va">identity</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-01"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-01-01" "2019-02-01"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-04-01"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-04-01" "2019-05-01"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

  </div></footer></body></html>

